(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{168:function(e,t,a){e.exports=a.p+"static/media/baseline-my_location-24px.ff53a15d.svg"},171:function(e,t,a){e.exports=a.p+"static/media/thomas_crapper.b7540a7f.jpg"},235:function(e,t,a){e.exports=a(437)},437:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(25),c=a.n(o),i=a(39),s=a(14),l=a(175),p=(a(246),a(32)),u=a(93),h=a.n(u),m=Object(i.c)({loginMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_LOGIN_ERROR":return"";case"LOGIN_INPUT_ERROR":return"Enter your username and password!";case"LOGIN_FAILED":return"Oops! The username and password didn't match. Try again!";case"LOGIN_FAILED_NO_CODE":return"Oops! Something went wrong! Is the server running?";default:return e}},registrationMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_REGISTRATION_ERROR":return"";case"REGISTRATION_INPUT_ERROR":return"Choose a username and password!";case"REGISTRATION_FAILED":return"Oops! That didn't work. The username might already be taken. Try again!";default:return e}}}),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login";switch((arguments.length>1?arguments[1]:void 0).type){case"SET_TO_LOGIN_MODE":return"login";case"SET_TO_REGISTER_MODE":return"register";default:return e}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload;case"UNSET_USER":return{};default:return e}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BATHROOMS":return t.payload;default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOCATION":return{latitude:t.payload.latitude,longitude:t.payload.longitude};default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{polyline:[],steps:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DIRECTIONS":return t.payload;case"CLEAR_DIRECTIONS":return{polyline:[],steps:[]};default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_GOTTA_GO":return!1;case"GOTTA_GO_TOGGLE":return!e;case"FORCE_GOTTA_GO":return!0;default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SELECTED_BATHROOM":return t.payload;case"CLEAR_SELECTED_BATHROOM":return{};default:return e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AMENITIES":return t.payload;default:return e}},T=Object(i.c)({errors:m,loginMode:d,user:E,bathrooms:O,location:g,directions:b,gottaGo:f,selectedBathroom:v,amenities:y}),w=a(7),j=a.n(w),C=a(9),_=a(27),k=a.n(_),A=j.a.mark(x),R=j.a.mark(I),S=j.a.mark(L);function x(e){var t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(C.c)({type:"CLEAR_LOGIN_ERROR"});case 3:return t={headers:{"Content-Type":"application/json"},withCredentials:!0},a.next=6,k.a.post("api/user/login",e.payload,t);case 6:return a.next=8,Object(C.c)({type:"FETCH_USER"});case 8:a.next=20;break;case 10:if(a.prev=10,a.t0=a.catch(0),console.log("Error with user login:",a.t0),401!==a.t0.response.status){a.next=18;break}return a.next=16,Object(C.c)({type:"LOGIN_FAILED"});case 16:a.next=20;break;case 18:return a.next=20,Object(C.c)({type:"LOGIN_FAILED_NO_CODE"});case 20:case"end":return a.stop()}},A,this,[[0,10]])}function I(e){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{"Content-Type":"application/json"},withCredentials:!0},e.next=4,k.a.post("api/user/logout",t);case 4:return e.next=6,Object(C.c)({type:"UNSET_USER"});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error with user logout:",e.t0);case 11:case"end":return e.stop()}},R,this,[[0,8]])}function L(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)("LOGIN",x);case 2:return e.next=4,Object(C.d)("LOGOUT",I);case 4:case"end":return e.stop()}},S,this)}var G=L,D=j.a.mark(N),M=j.a.mark(B);function N(e){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(C.c)({type:"CLEAR_REGISTRATION_ERROR"});case 3:return t.next=5,k.a.post("api/user/register",e.payload);case 5:return t.next=7,Object(C.c)({type:"LOGIN",payload:e.payload});case 7:return t.next=9,Object(C.c)({type:"SET_TO_LOGIN_MODE"});case 9:t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(0),console.log("Error with user registration:",t.t0),t.next=16,Object(C.c)({type:"REGISTRATION_FAILED"});case 16:case"end":return t.stop()}},D,this,[[0,11]])}function B(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)("REGISTER",N);case 2:case"end":return e.stop()}},M,this)}var F=B,U=j.a.mark(H),P=j.a.mark(W);function H(){var e,t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e={headers:{"Content-Type":"application/json"},withCredentials:!0},a.next=4,k.a.get("api/user",e);case 4:return t=a.sent,a.next=7,Object(C.c)({type:"SET_USER",payload:t.data});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0),console.log("User get request failed",a.t0);case 12:case"end":return a.stop()}},U,this,[[0,9]])}function W(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)("FETCH_USER",H);case 2:case"end":return e.stop()}},P,this)}var Z=W,X=j.a.mark(J),z=j.a.mark(V),K=j.a.mark(Y),$=j.a.mark(ee),Q=j.a.mark(te),q=j.a.mark(ae);function J(){var e;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get("api/bathroom");case 3:return e=t.sent,t.next=6,Object(C.c)({type:"SET_BATHROOMS",payload:e.data});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error getting bathrooms",t.t0);case 11:case"end":return t.stop()}},X,this,[[0,8]])}function V(e){var t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k.a.get("api/bathroom/closest",{params:{latitude:e.payload.latitude,longitude:e.payload.longitude,limit:e.payload.limit}});case 3:return t=a.sent,a.next=6,Object(C.c)({type:"SET_BATHROOMS",payload:t.data});case 6:return a.next=8,Object(C.c)({type:"CLEAR_DIRECTIONS"});case 8:a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("Error getting bathrooms",a.t0);case 13:case"end":return a.stop()}},z,this,[[0,10]])}function Y(e){var t,a,n,r,o,c,i,s,l,p,u,h,m,d,E;return j.a.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:O.prev=0,t=Object.keys(e.payload.filterProps).filter(function(t){return e.payload.filterProps[t]}),a=[],n=!0,r=!1,o=void 0,O.prev=6,c=e.payload.bathrooms[Symbol.iterator]();case 8:if(n=(i=c.next()).done){O.next=33;break}for(s=i.value,l=0,p=!0,u=!1,h=void 0,O.prev=14,m=t[Symbol.iterator]();!(p=(d=m.next()).done);p=!0)E=d.value,-1===s.amenities_present.indexOf(E)?l--:l++,l===t.length&&a.push(s);O.next=22;break;case 18:O.prev=18,O.t0=O.catch(14),u=!0,h=O.t0;case 22:O.prev=22,O.prev=23,p||null==m.return||m.return();case 25:if(O.prev=25,!u){O.next=28;break}throw h;case 28:return O.finish(25);case 29:return O.finish(22);case 30:n=!0,O.next=8;break;case 33:O.next=39;break;case 35:O.prev=35,O.t1=O.catch(6),r=!0,o=O.t1;case 39:O.prev=39,O.prev=40,n||null==c.return||c.return();case 42:if(O.prev=42,!r){O.next=45;break}throw o;case 45:return O.finish(42);case 46:return O.finish(39);case 47:return O.next=49,Object(C.c)({type:"SET_BATHROOMS",payload:a});case 49:return O.next=51,Object(C.c)({type:"CLEAR_DIRECTIONS"});case 51:O.next=56;break;case 53:O.prev=53,O.t2=O.catch(0),console.log("Error getting bathrooms",O.t2);case 56:case"end":return O.stop()}},K,this,[[0,53],[6,35,39,47],[14,18,22,30],[23,,25,29],[40,,42,46]])}function ee(e){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.post("api/bathroom",e.payload);case 3:return t.next=5,Object(C.c)({type:"GET_LOCATION"});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error adding bathroom",t.t0);case 10:case"end":return t.stop()}},$,this,[[0,7]])}function te(e){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.delete("api/bathroom/".concat(e.payload));case 3:return t.next=5,Object(C.c)({type:"GET_ALL_BATHROOMS"});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error deleting bathroom",t.t0);case 10:case"end":return t.stop()}},Q,this,[[0,7]])}function ae(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)("GET_ALL_BATHROOMS",J);case 2:return e.next=4,Object(C.d)("GET_CLOSEST_BATHROOM",V);case 4:return e.next=6,Object(C.d)("GET_FILTERED_BATHROOMS",Y);case 6:return e.next=8,Object(C.d)("ADD_BATHROOM",ee);case 8:return e.next=10,Object(C.d)("DELETE_BATHROOM",te);case 10:case"end":return e.stop()}},q,this)}var ne=ae,re=j.a.mark(ie),oe=j.a.mark(se),ce=function(){return new Promise(function(e,t){navigator.geolocation.getCurrentPosition(function(t){return e(t)},function(e){return t(e)})})};function ie(e){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(C.b)(ce);case 3:return t=e.sent,e.next=6,Object(C.c)({type:"SET_LOCATION",payload:t.coords});case 6:return e.next=8,Object(C.c)({type:"GET_CLOSEST_BATHROOM",payload:{latitude:t.coords.latitude,longitude:t.coords.longitude,limit:25}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Couldn't get location",e.t0);case 13:case"end":return e.stop()}},re,this,[[0,10]])}function se(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)("GET_LOCATION",ie);case 2:case"end":return e.stop()}},oe,this)}var le=se,pe=a(167),ue=a.n(pe),he=j.a.mark(Ee),me=j.a.mark(Oe);function de(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}function Ee(e){var t;return j.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,k.a.get("https://maps.googleapis.com/maps/api/directions/json?origin=".concat(e.payload.origin.latitude,",").concat(e.payload.origin.longitude,"&destination=").concat(e.payload.destination.lat,",").concat(e.payload.destination.lng),{headers:{"Access-Control-Allow-Origin":"*"},params:{key:"AIzaSyB675LdwmXlgKaIpAvXeOUIjlZU8Zl1TkQ",mode:"walking"}});case 3:return t=a.sent,a.next=6,Object(C.c)({type:"SET_DIRECTIONS",payload:{polyline:ue()(t.data.routes[0].overview_polyline.points),steps:t.data.routes[0].legs[0].steps.map(function(e){return de(e.html_instructions).replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3")})}});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log("Error getting directions",a.t0);case 11:case"end":return a.stop()}},he,this,[[0,8]])}function Oe(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)("GET_DIRECTIONS",Ee);case 2:case"end":return e.stop()}},me,this)}var ge=Oe,be=j.a.mark(ve),fe=j.a.mark(ye);function ve(){var e;return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get("api/amenities");case 3:return e=t.sent,t.next=6,Object(C.c)({type:"SET_AMENITIES",payload:e.data});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("amenities get request failed",t.t0);case 11:case"end":return t.stop()}},be,this,[[0,8]])}function ye(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)("GET_AMENITIES",ve);case 2:case"end":return e.stop()}},fe,this)}var Te=ye,we=j.a.mark(Ce),je=j.a.mark(_e);function Ce(e){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.post("api/ratings",e.payload);case 3:return t.next=5,Object(C.c)({type:"GET_LOCATION"});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("amenities get request failed",t.t0);case 10:case"end":return t.stop()}},we,this,[[0,7]])}function _e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)("RATE_BATHROOM",Ce);case 2:case"end":return e.stop()}},je,this)}var ke=_e,Ae=j.a.mark(Re);function Re(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)([le(),G(),F(),Z(),ne(),ge(),Te(),ke()]);case 2:case"end":return e.stop()}},Ae,this)}var Se=a(20),xe=a(21),Ie=a(23),Le=a(22),Ge=a(24),De=a(440),Me=a(442),Ne=a(439),Be=a(438),Fe=a(35),Ue=a(176),Pe=a(34),He=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Ie.a)(this,(e=Object(Le.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.login=function(e){e.preventDefault(),a.state.username&&a.state.password?a.props.dispatch({type:"LOGIN",payload:{username:a.state.username,password:a.state.password}}):a.props.dispatch({type:"LOGIN_INPUT_ERROR"})},a.handleInputChangeFor=function(e){return function(t){a.setState(Object(Pe.a)({},e,t.target.value))}},a}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.errors.loginMessage&&r.a.createElement("h2",{className:"alert",role:"alert"},this.props.errors.loginMessage),r.a.createElement("form",{onSubmit:this.login},r.a.createElement("h1",null,"Login"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Username:",r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInputChangeFor("username")}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password:",r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInputChangeFor("password")}))),r.a.createElement("div",null,r.a.createElement("input",{className:"log-in",type:"submit",name:"submit",value:"Log In"}))),r.a.createElement("center",null,r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){e.props.dispatch({type:"SET_TO_REGISTER_MODE"})}},"Register")))}}]),t}(n.Component),We=Object(s.b)(function(e){return{errors:e.errors}})(He),Ze=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Ie.a)(this,(e=Object(Le.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.registerUser=function(e){e.preventDefault(),a.state.username&&a.state.password?a.props.dispatch({type:"REGISTER",payload:{username:a.state.username,password:a.state.password}}):a.props.dispatch({type:"REGISTRATION_INPUT_ERROR"})},a.handleInputChangeFor=function(e){return function(t){a.setState(Object(Pe.a)({},e,t.target.value))}},a}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.errors.registrationMessage&&r.a.createElement("h2",{className:"alert",role:"alert"},this.props.errors.registrationMessage),r.a.createElement("form",{onSubmit:this.registerUser},r.a.createElement("h1",null,"Register User"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Username:",r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInputChangeFor("username")}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password:",r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInputChangeFor("password")}))),r.a.createElement("div",null,r.a.createElement("input",{className:"register",type:"submit",name:"submit",value:"Register"}))),r.a.createElement("center",null,r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){e.props.dispatch({type:"SET_TO_LOGIN_MODE"})}},"Login")))}}]),t}(n.Component),Xe=Object(s.b)(function(e){return{errors:e.errors}})(Ze),ze=Object(s.b)(function(e){return{user:e.user,loginMode:e.loginMode}})(function(e){var t,a=e.component,n=e.user,o=e.loginMode,c=Object(Ue.a)(e,["component","user","loginMode"]);return t=n.id?a:"login"===o?We:Xe,r.a.createElement(Be.a,Object.assign({},c,{component:t}))}),Ke=function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("p",null,"This about page is for anyone to read!")))},$e=Object(s.b)()(function(e){return r.a.createElement("button",{className:e.className,onClick:function(){return e.dispatch({type:"LOGOUT"})}},"Log Out")}),Qe=Object(s.b)(function(e){return{user:e.user}})(function(e){return r.a.createElement("div",null,r.a.createElement("h1",{id:"welcome"},"Welcome, ",e.user.username,"!"),r.a.createElement("p",null,"Your ID is: ",e.user.id),r.a.createElement($e,{className:"log-in"}))}),qe=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Info Page"))},Je=a(8),Ve=a(168),Ye=a.n(Ve),et=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Ie.a)(this,(e=Object(Le.a)(t)).call.apply(e,[this].concat(r)))).state={submitted:!1,rating:""},a.handleChange=function(){return function(e){a.setState({rating:e.target.value})}},a}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Je.c,{open:this.props.open,onClose:this.props.handleClose},r.a.createElement(Je.g,null,"Rate this Bathroom!"),r.a.createElement(Je.e,null,r.a.createElement(Je.f,{id:"alert-dialog-description"},this.props.bathroom.place_name)),r.a.createElement(Je.d,null,r.a.createElement(Je.h,null,r.a.createElement(Je.k,{component:"legend"},"Rate:"),r.a.createElement(Je.n,{row:!0,"aria-label":"Rating",name:"rating",value:this.state.rating,onChange:this.handleChange()},r.a.createElement(Je.i,{value:"1",control:r.a.createElement(Je.m,null),label:"1"}),r.a.createElement(Je.i,{value:"2",control:r.a.createElement(Je.m,null),label:"2"}),r.a.createElement(Je.i,{value:"3",control:r.a.createElement(Je.m,null),label:"3"}),r.a.createElement(Je.i,{value:"4",control:r.a.createElement(Je.m,null),label:"4"}),r.a.createElement(Je.i,{value:"5",control:r.a.createElement(Je.m,null),label:"5"})),r.a.createElement(Je.a,{onClick:function(){e.props.dispatch({type:"RATE_BATHROOM",payload:{id:e.props.bathroom.id,rating:Number(e.state.rating)}}),e.props.handleClose(),e.setState({rating:""})}},"Submit"))))}}]),t}(n.Component),tt=Object(s.b)()(et),at=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Ie.a)(this,(e=Object(Le.a)(t)).call.apply(e,[this].concat(r)))).state={showingInfoWindow:!1,activeMarker:{},selectedPlace:{},open:!1},a.handleClose=function(){a.setState({open:!1})},a.onMarkerClick=function(e,t,n){a.setState({selectedPlace:e,activeMarker:t,showingInfoWindow:!0}),a.props.dispatch({type:"SET_SELECTED_BATHROOM",payload:e.bathroom})},a.onMapClicked=function(e){a.state.showingInfoWindow&&(a.setState({showingInfoWindow:!1,activeMarker:{},selectedPlace:{}}),a.props.dispatch({type:"CLEAR_SELECTED_BATHROOM"}))},a.onDirectionsClick=function(){a.props.dispatch({type:"GET_DIRECTIONS",payload:{origin:a.props.location,destination:a.state.selectedPlace.position}})},a.onRateClick=function(){a.setState({open:!0})},a}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"onInfoWindowOpen",value:function(e,t){var a=r.a.createElement("div",null,r.a.createElement(Je.p,{variant:"h6"},this.state.selectedPlace.name),r.a.createElement(Je.p,{variant:"body1"},this.state.selectedPlace.address),r.a.createElement("br",null),r.a.createElement(Je.p,{variant:"body1"},"Additional Directions: ",this.state.selectedPlace.additionalDirections?this.state.selectedPlace.additionalDirections:"none"),r.a.createElement("span",null,r.a.createElement(Je.a,{onClick:this.onDirectionsClick},"Directions"),this.props.user?r.a.createElement(Je.a,{onClick:this.onRateClick},"Rate"):r.a.createElement(r.a.Fragment,null)));c.a.render(r.a.Children.only(a),document.getElementById("iwc"))}},{key:"render",value:function(){var e=this,t={height:"50vh",width:"100%",position:"relative"};return r.a.createElement("div",{style:t},r.a.createElement(Fe.Map,{google:this.props.google,style:t,zoom:14,initialCenter:{lat:this.props.location.latitude,lng:this.props.location.longitude},containerStyle:t,onClick:this.onMapClicked,mapTypeControl:!1,fullscreenControl:!1},r.a.createElement(Fe.Marker,{icon:Ye.a,position:{lat:this.props.location.latitude,lng:this.props.location.longitude}}),!1===this.props.gottaGo?this.props.bathrooms.map(function(t){return r.a.createElement(Fe.Marker,{key:t.id,bathroom:t,onClick:e.onMarkerClick,name:t.place_name,address:t.address,position:{lat:t.latitude,lng:t.longitude},additionalDirections:t.additional_directions,amenitiesPresent:t.amenities_present})}):r.a.createElement(Fe.Marker,{onClick:this.onMarkerClick,bathroom:this.props.bathrooms[0],name:this.props.bathrooms[0].place_name,address:this.props.bathrooms[0].address,position:{lat:this.props.bathrooms[0].latitude,lng:this.props.bathrooms[0].longitude},additionalDirections:this.props.bathrooms[0].additional_directions,amenitiesPresent:this.props.bathrooms[0].amenities_present}),r.a.createElement(Fe.InfoWindow,{marker:this.state.activeMarker,visible:this.state.showingInfoWindow,maxWidth:"250",onOpen:function(t){e.onInfoWindowOpen(e.props,t)}},r.a.createElement("div",{id:"iwc"})),this.props.directions.polyline[0]?r.a.createElement(Fe.Polyline,{path:this.props.directions.polyline,strokeColor:"#0000FF",strokeOpacity:.8,strokeWeight:2}):r.a.createElement(r.a.Fragment,null)),r.a.createElement(tt,{bathroom:this.props.selectedBathroom,open:this.state.open,handleClose:this.handleClose}))}}]),t}(n.Component),nt=Object(Fe.GoogleApiWrapper)({apiKey:"AIzaSyB675LdwmXlgKaIpAvXeOUIjlZU8Zl1TkQ"})(Object(s.b)(function(e){return{bathrooms:e.bathrooms,location:e.location,directions:e.directions,gottaGo:e.gottaGo,selectedBathroom:e.selectedBathroom,user:e.user}})(at)),rt=function(e){function t(){return Object(Se.a)(this,t),Object(Ie.a)(this,Object(Le.a)(t).apply(this,arguments))}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"CLEAR_GOTTA_GO"})}},{key:"render",value:function(){var e=this;return r.a.createElement(Je.l,{container:!0,direction:"column"},r.a.createElement(Je.l,{item:!0},r.a.createElement(nt,null)),r.a.createElement(Je.l,{container:!0,direction:"row",justify:"center",alignItems:"flex-start"},this.props.directions.polyline[0]?r.a.createElement(Je.l,{item:!0,lg:6},r.a.createElement(Je.a,{onClick:function(){return e.props.dispatch({type:"CLEAR_DIRECTIONS"})}},"Clear directions"),r.a.createElement("ol",null,this.props.directions.steps.map(function(e,t){return r.a.createElement(Je.p,{key:t,variant:"body1"}," ",r.a.createElement("li",null," ",e))}))):r.a.createElement(r.a.Fragment,null),r.a.createElement(Je.l,{item:!0,lg:6},this.props.selectedBathroom.amenities_present?this.props.selectedBathroom.amenities_present[0]?r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.p,{variant:"h6"},"Rating: ",null===this.props.selectedBathroom.rating?"No Ratings":Math.round(10*this.props.selectedBathroom.rating)/10),r.a.createElement(Je.p,{variant:"h6"},"Features"),r.a.createElement("ul",null,this.props.selectedBathroom.amenities_present.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(Je.p,{variant:"body1"},e))}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.p,{variant:"h6"},"Features"),r.a.createElement(Je.p,{variant:"h6"},"Rating: ",null===this.props.selectedBathroom.rating?"No Ratings":Math.round(10*this.props.selectedBathroom.rating)/10),r.a.createElement(Je.p,{variant:"body1"},"No reported features, someone should get on that.")):r.a.createElement(r.a.Fragment,null))))}}]),t}(n.Component),ot=Object(s.b)(function(e){return{bathrooms:e.bathrooms,location:e.location,directions:e.directions,gottaGo:e.gottaGo,selectedBathroom:e.selectedBathroom}})(rt),ct=a(45),it=a(66),st=a.n(it),lt=a(172),pt=a.n(lt),ut=a(173),ht=a.n(ut),mt=a(88),dt=a.n(mt),Et=a(89),Ot=a.n(Et),gt=a(87),bt=a.n(gt),ft=a(81),vt=a.n(ft),yt=a(42),Tt=a.n(yt),wt=a(43),jt=a.n(wt),Ct=a(47),_t=a.n(Ct),kt=a(441),At=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Ie.a)(this,(e=Object(Le.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(){a.props.dispatch({type:"CLEAR_GOTTA_GO"}),a.props.history.push(a.props.path),a.props.close()},a}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){return r.a.createElement(Tt.a,{fullwidth:"true",color:"secondary",onClick:this.handleClick},this.props.name)}}]),t}(n.Component),Rt=Object(kt.a)(Object(s.b)()(At)),St=a(171),xt=a.n(St),It=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Ie.a)(this,(e=Object(Le.a)(t)).call.apply(e,[this].concat(r)))).gottaGo=function(){a.props.close(),!0===a.props.gottaGo&&"/bathroomfinder"===a.props.history.location.pathname?a.props.dispatch({type:"GOTTA_GO_TOGGLE"}):a.props.dispatch({type:"FORCE_GOTTA_GO"}),a.props.history.push("/bathroomfinder"),a.props.dispatch({type:"CLEAR_DIRECTIONS"})},a}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){return r.a.createElement(Je.a,{fullwidth:"true",color:"secondary",onClick:this.gottaGo},!0===this.props.gottaGo&&"/bathroomfinder"===this.props.history.location.pathname?"SHOW MORE BATHROOMS":"GOTTA GO")}}]),t}(n.Component),Lt=Object(kt.a)(Object(s.b)(function(e){return{location:e.location,gottaGo:e.gottaGo}})(It)),Gt=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Ie.a)(this,(e=Object(Le.a)(t)).call.apply(e,[this].concat(r)))).state={left:!1,right:!1,amenitiesToSearch:{}},a.toggleDrawer=function(e,t){return function(){a.setState(Object(Pe.a)({},e,t))}},a.handleAmenityChange=function(e,t){return function(n){a.setState({amenitiesToSearch:Object(ct.a)({},a.state.amenitiesToSearch,Object(Pe.a)({},e,n.target[t]))})}},a.filterSearch=function(){a.props.dispatch({type:"GET_FILTERED_BATHROOMS",payload:{bathrooms:a.props.bathrooms,filterProps:a.state.amenitiesToSearch}}),a.setState({amenitiesToSearch:{},right:!1})},a.clearSearch=function(){a.props.dispatch({type:"GET_CLOSEST_BATHROOM",payload:{latitude:a.props.location.latitude,longitude:a.props.location.longitude,limit:25}}),a.setState({amenitiesToSearch:{},right:!1})},a}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(dt.a,{position:"sticky"},r.a.createElement(Ot.a,null,r.a.createElement(jt.a,{onClick:this.toggleDrawer("left",!0),"aria-label":"Open drawer"},r.a.createElement(pt.a,null)),r.a.createElement(_t.a,{style:{flex:1},variant:"h6"},"Crappr"),r.a.createElement(Lt,{close:this.toggleDrawer("left",!1)}),r.a.createElement(jt.a,{onClick:this.toggleDrawer("right",!0),"aria-label":"Open drawer"},r.a.createElement(ht.a,{color:"secondary"})))),r.a.createElement(st.a,{open:this.state.left,onClose:this.toggleDrawer("left",!1),onOpen:this.toggleDrawer("left",!0)},r.a.createElement("img",{src:xt.a,alt:"Thomas Crapper",style:{width:240}}),r.a.createElement(Rt,{close:this.toggleDrawer("left",!1),name:"Bathroom Finder",path:"/bathroomfinder"}),r.a.createElement(Rt,{close:this.toggleDrawer("left",!1),path:"/home",name:this.props.user.id?"Home":"Login / Register"}),this.props.user&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Rt,{close:this.toggleDrawer("left",!1),path:"/addbathroom",name:"Add Bathroom"})),!0===this.props.user.is_admin?r.a.createElement(Rt,{close:this.toggleDrawer("left",!1),path:"/admin",name:"Admin"}):r.a.createElement(r.a.Fragment,null),r.a.createElement(Lt,{close:this.toggleDrawer("left",!1)})),r.a.createElement(st.a,{open:this.state.right,anchor:"right",onClose:this.toggleDrawer("right",!1),onOpen:this.toggleDrawer("right",!0)},r.a.createElement(Tt.a,{onClick:this.clearSearch},"Clear Search"),r.a.createElement(Tt.a,{onClick:this.filterSearch},"Narrow Your search"),this.props.amenities?this.props.amenities.map(function(t){return r.a.createElement(bt.a,{key:t.id,control:r.a.createElement(vt.a,{onChange:e.handleAmenityChange(t.name,"checked"),value:t.name}),label:t.name})}):r.a.createElement(r.a.Fragment,null)))}}]),t}(r.a.Component),Dt=Object(s.b)(function(e){return{user:e.user,amenities:e.amenities,location:e.location,bathrooms:e.bathrooms}})(Gt),Mt=a(82),Nt=a.n(Mt),Bt=a(83),Ft=a.n(Bt),Ut=a(84),Pt=a.n(Ut),Ht=a(85),Wt=a.n(Ht),Zt=a(86),Xt=a.n(Zt),zt=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Ie.a)(this,(e=Object(Le.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,bathroomToAdd:{position:{},address:{},name:"",amenities:{},additionalDirections:""}},a.handleClose=function(){a.setState({open:!1}),a.props.history.push("./bathroomfinder")},a.onSubmit=function(e){e.preventDefault(),a.props.dispatch({type:"ADD_BATHROOM",payload:a.state.bathroomToAdd}),a.setState({open:!0,bathroomToAdd:{position:{},address:{},name:"",amenities:Object(ct.a)({},a.state.bathroomToAdd.amenities),additionalDirections:""}}),e.target.reset()},a.handleChange=function(e,t){return function(n){a.setState({bathroomToAdd:Object(ct.a)({},a.state.bathroomToAdd,Object(Pe.a)({},e,n.target[t]))})}},a.handleAmenityChange=function(e,t){return function(n){a.setState({bathroomToAdd:Object(ct.a)({},a.state.bathroomToAdd,{amenities:Object(ct.a)({},a.state.bathroomToAdd.amenities,Object(Pe.a)({},e,n.target[t]))})})}},a}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"componentDidMount",value:function(){this.renderAutoComplete()}},{key:"renderAutoComplete",value:function(){var e=this,t=new google.maps.places.Autocomplete(this.autocomplete);t.addListener("place_changed",function(){var a=t.getPlace();e.setState({bathroomToAdd:Object(ct.a)({},e.state.bathroomToAdd,{position:a.geometry.location,address:a.formatted_address,name:a.name})})})}},{key:"render",value:function(){var e=this;return this.props.amenities?r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement(Je.j,null,r.a.createElement(Je.h,null,r.a.createElement(Je.o,{placeholder:"Enter a location",inputRef:function(t){return e.autocomplete=t},type:"text"}),this.props.amenities.map(function(t){return r.a.createElement(Je.i,{key:t.id,control:r.a.createElement(Je.b,{checked:!!e.props.amenities&&e.state.bathroomToAdd.amenities[t.id],onChange:e.handleAmenityChange(t.id,"checked"),value:t.id}),label:t.name})}),r.a.createElement(Je.o,{placeholder:"Any additional directions?",onChange:this.handleChange("additionalDirections","value"),value:this.state.additionalDirections}),r.a.createElement(Je.a,{type:"submit"},"Submit")))),r.a.createElement(Nt.a,{open:this.state.open,onClose:this.handleClose},r.a.createElement(Xt.a,null,"Submitted!"),r.a.createElement(Pt.a,null,r.a.createElement(Wt.a,{id:"alert-dialog-description"},"Bathroom Added")),r.a.createElement(Ft.a,null,r.a.createElement(Je.a,{onClick:this.handleClose,color:"primary",autoFocus:!0},"okay")))):r.a.createElement("p",null,"loading...")}}]),t}(n.Component),Kt=Object(Fe.GoogleApiWrapper)({apiKey:"AIzaSyB675LdwmXlgKaIpAvXeOUIjlZU8Zl1TkQ",libraries:["places"]})(Object(s.b)(function(e){return{amenities:e.amenities}})(zt)),$t=a(31),Qt=a.n($t),qt=a(55),Jt=a.n(qt),Vt=a(174),Yt=a.n(Vt),ea=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Ie.a)(this,(e=Object(Le.a)(t)).call.apply(e,[this].concat(r)))).handleDelete=function(e){a.props.dispatch({type:"DELETE_BATHROOM",payload:e})},a}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Jt.a,null,r.a.createElement(Qt.a,{component:"th",scope:"row"},this.props.bathroom.place_name),r.a.createElement(Qt.a,null," ",this.props.bathroom.address),r.a.createElement(Qt.a,null,this.props.bathroom.additional_directions),r.a.createElement(Qt.a,null,r.a.createElement("ul",null,null===this.props.bathroom.amenities_present[0]?"no amenities added":this.props.bathroom.amenities_present.map(function(e,t){return r.a.createElement("li",{key:t},e)}))),r.a.createElement(Qt.a,null,r.a.createElement(jt.a,{onClick:function(){return e.handleDelete(e.props.bathroom.id)}},r.a.createElement(Yt.a,null))))}}]),t}(n.Component),ta=Object(s.b)()(ea),aa=a(90),na=a.n(aa),ra=a(92),oa=a.n(ra),ca=a(91),ia=a.n(ca),sa=a(41),la=a.n(sa),pa=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Ie.a)(this,(e=Object(Le.a)(t)).call.apply(e,[this].concat(r)))).componentDidMount=function(){a.props.dispatch({type:"GET_ALL_BATHROOMS"})},a}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"render",value:function(){return r.a.createElement(la.a,null,r.a.createElement(na.a,null,r.a.createElement(ia.a,null,r.a.createElement(Jt.a,null,r.a.createElement(Qt.a,null,"Place Name"),r.a.createElement(Qt.a,null,"Address"),r.a.createElement(Qt.a,null,"Notes"),r.a.createElement(Qt.a,null,"Amenities"),r.a.createElement(Qt.a,null,"Delete"))),r.a.createElement(oa.a,null,this.props.bathrooms.map(function(e){return r.a.createElement(ta,{key:e.id,bathroom:e})}))))}}]),t}(n.Component),ua=Object(s.b)(function(e){return{bathrooms:e.bathrooms,location:e.location}})(pa),ha=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(Ie.a)(this,(e=Object(Le.a)(t)).call.apply(e,[this].concat(r)))).state={recievedLocationPermission:!1},a.getUserLocation=function(){return new Promise(function(e,t){navigator.geolocation.getCurrentPosition(function(t){return e(a.setLocation(t))},function(e){return t(e)})})},a.setLocation=function(e){a.setState({recievedLocationPermission:!0}),a.props.dispatch({type:"SET_LOCATION",payload:e.coords}),a.props.dispatch({type:"GET_CLOSEST_BATHROOM",payload:{latitude:e.coords.latitude,longitude:e.coords.longitude,limit:25}})},a}return Object(Ge.a)(t,e),Object(xe.a)(t,[{key:"componentDidMount",value:function(){this.getUserLocation(),this.props.dispatch({type:"FETCH_USER"}),this.props.dispatch({type:"GET_AMENITIES"})}},{key:"render",value:function(){return!0===this.state.recievedLocationPermission?r.a.createElement(De.a,null,r.a.createElement("div",null,r.a.createElement(Dt,null),r.a.createElement(Me.a,null,r.a.createElement(Ne.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(Be.a,{exact:!0,path:"/bathroomfinder",component:ot}),r.a.createElement(Be.a,{exact:!0,path:"/about",component:Ke}),r.a.createElement(ze,{exact:!0,path:"/home",component:Qe}),r.a.createElement(ze,{exact:!0,path:"/info",component:qe}),r.a.createElement(ze,{exact:!0,path:"/addbathroom",component:Kt}),r.a.createElement(ze,{exact:!0,path:"/admin",component:ua}),r.a.createElement(Be.a,{render:function(){return r.a.createElement("h1",null,"404")}})))):r.a.createElement("p",null,"Loading...")}}]),t}(n.Component),ma=Object(Fe.GoogleApiWrapper)({apiKey:"AIzaSyB675LdwmXlgKaIpAvXeOUIjlZU8Zl1TkQ",libraries:["places"]})(Object(s.b)()(ha)),da=Object(p.createMuiTheme)({palette:{primary:{main:"#ff9900"},secondary:{main:"#0066ff"}},typography:{useNextVariants:!0}}),Ea=Object(l.a)(),Oa=[Ea],ga=Object(i.d)(T,i.a.apply(void 0,Oa));Ea.run(Re),c.a.render(r.a.createElement(s.a,{store:ga},r.a.createElement(p.MuiThemeProvider,{theme:da},r.a.createElement(h.a,null,r.a.createElement(ma,null)))),document.getElementById("react-root"))}},[[235,2,1]]]);
//# sourceMappingURL=main.5fcd6f66.chunk.js.map